@model BlogWebApplication.Models.ProjectViewModels.ProjectViewModel
@{ 
    ViewData["HeaderImage"] = $"../../UserFiles/Projects/{Model.Project.Id}/HeaderImage.jpg";
}

<section id="blog" class="blog">
      <div class="container" data-aos="fade-up">
        <div class="row g-5">
          <div class="col-lg-8">
            <article class="blog-details">
              <div class="post-img">
                <img src='@ViewData["HeaderImage"]' alt="" class="img-fluid">
              </div>

              <h2 class="title">@Model?.Project?.Title</h2>
              <div class="meta-top">
                <ul>
                  <li class="d-flex align-items-center"><i class="bi bi-person"></i> <a href="blog-details.html">@Model?.Project?.Creator?.FirstName @Model?.Project?.Creator?.LastName</a></li>
                  <li class="d-flex align-items-center"><i class="bi bi-clock"></i> <a href="blog-details.html"><time datetime="2020-01-01">@Model?.Project?.CreatedOn.ToString("MMM d, yyyy")</time></a></li>
                  <li class="d-flex align-items-center"><i class="bi bi-chat-dots"></i> <a href="blog-details.html">@Model?.Project?.Comments.Count() Comments</a></li>
                </ul>
              </div><!-- End meta top -->

              <div class="content">@Html.Raw(Model.Project.Content)</div><!-- End post content -->

              <div class="meta-bottom">
                <i class="bi bi-tags"></i>
                <ul class="tags">
                  @foreach(var tag in Model?.Project?.Tags){ <li><a href="#">@tag</a></li> }
                </ul>
              </div><!-- End meta bottom -->
            </article><!-- End blog post -->

            <div class="comments">
              <h4 class="comments-count">@Model?.Project?.Comments.Count() Comments</h4>
              @foreach(var comment in Model.Project.Comments.Where(comment => comment.Parent is null)){
                <div id="comment-1" class="comment">
                  <div class="d-flex">
                    <div class="comment-img"><img src="~/materals/assets/img/blog/comments-1.jpg" alt=""></div>
                    <div>
                      <h5>
                        @if(comment?.AnonymousUserName.Length > 0 ){
                          <a href=""> @comment?.AnonymousUserName</a>
                        }else{
                          <a href=""> @comment?.Author?.FirstName @comment?.Author?.LastName</a>
                        }
                      <time datetime="2020-01-01">@comment?.CreatedOn.ToString("d MMM, yyyy")</time>
                      <p>@comment?.Content</p>
                    </div>
                  </div>
                  @foreach(var reply in comment?.Comments){
                    <div id="comment-reply-1" class="comment comment-reply">
                      <div class="d-flex">
                        <div class="comment-img"><img src="assets/img/blog/comments-3.jpg" alt=""></div>
                        <div>
                          <h5><a href="">Lynda Small</a> <a href="#" class="reply"><i class="bi bi-reply-fill"></i> Reply</a></h5>
                          <time datetime="2020-01-01">01 Jan,2022</time>
                          <p>
                            Enim ipsa eum fugiat fuga repellat. Commodi quo quo dicta. Est ullam aspernatur ut vitae quia mollitia id non. Qui ad quas nostrum rerum sed necessitatibus aut est. Eum officiis sed repellat maxime vero nisi natus. Amet nesciunt nesciunt qui illum omnis est et dolor recusandae.
                            Recusandae sit ad aut impedit et. Ipsa labore dolor impedit et natus in porro aut. Magnam qui cum. Illo similique occaecati nihil modi eligendi. Pariatur distinctio labore omnis incidunt et illum. Expedita et dignissimos distinctio laborum minima fugiat.
                            Libero corporis qui. Nam illo odio beatae enim ducimus. Harum reiciendis error dolorum non autem quisquam vero rerum neque.
                          </p>
                        </div>
                      </div>

                      <div id="comment-reply-2" class="comment comment-reply">
                        <div class="d-flex">
                          <div class="comment-img"><img src="assets/img/blog/comments-4.jpg" alt=""></div>
                          <div>
                            <h5><a href="">Sianna Ramsay</a> <a href="#" class="reply"><i class="bi bi-reply-fill"></i> Reply</a></h5>
                            <time datetime="2020-01-01">01 Jan,2022</time>
                            <p>
                              Et dignissimos impedit nulla et quo distinctio ex nemo. Omnis quia dolores cupiditate et. Ut unde qui eligendi sapiente omnis ullam. Placeat porro est commodi est officiis voluptas repellat quisquam possimus. Perferendis id consectetur necessitatibus.
                            </p>
                          </div>
                        </div>
                      </div><!-- End comment reply #2-->
                    </div><!-- End comment reply #1-->
                  }
                </div><!-- End comment -->
              }

              <div class="reply-form">
                <h4>Leave a Reply</h4>
                <p>Your email address will not be published. Required fields are marked * </p>
                <form asp-controller="Project" asp-action="Comment">
                  <input asp-for="Project.Id" readonly hidden />
                  <div class="row">
                    <div class="col form-group">
                      <input asp-for="Comment.AnonymousUserName" class="form-control" placeholder="Your Name*" required>
                      <span asp-validation-for="Comment.AnonymousUserName" class="text-danger"></span>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col form-group">
                      <textarea asp-for="Comment.Content" class="form-control" rows="3" required placeholder="Your Comment*"></textarea>
                      <span asp-validation-for="Comment.Content" class="text-danger"></span>
                    </div>
                  </div>
                  <button type="submit" class="btn btn-primary">Post Comment</button>
                </form>
              </div>
            </div><!-- End blog comments -->
          </div>

          <div class="col-lg-4">
            <div class="sidebar">
              <div class="sidebar-item categories">
                <h3 class="sidebar-title">Categories</h3>
                <ul class="mt-3">
                  <li><a href="#">@Model.Project.Category</a></li>
                </ul>
              </div><!-- End sidebar categories-->
              <div class="sidebar-item categories">
                <h3 class="sidebar-title">Repository</h3>
                <ul class="mt-3">
                  <li><a href="#">@Model.Project.Repository</a></li>
                </ul>
              </div><!-- End sidebar categories-->
            </div><!-- End Blog Sidebar -->
          </div>
        </div>
      </div>
    </section><!-- End Blog Details Section -->